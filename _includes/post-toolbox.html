{% if page.layout == 'home' %}
<section id="post-toolbox" class="mt-3">
  <button 
    type="button" 
    class="panel-heading w-100 text-start border-0 bg-transparent p-0 d-flex justify-content-between align-items-center"
    onclick="toggleToolbox()"
    aria-expanded="false"
    id="toolbox-toggle"
    style="cursor: pointer;"
  >
    <h2 class="panel-heading mb-0">Filter & Sort</h2>
    <i class="fas fa-chevron-down" id="toolbox-icon"></i>
  </button>
  
  <div id="toolbox-content" class="content mt-3" style="display: none;">
    <!-- Filter Section -->
    <div class="mb-3">
      <label class="small text-muted mb-2 d-block">Filter by Category</label>
      <div class="d-flex flex-wrap" style="gap: 0.5rem;">
        {% assign all_categories = site.categories | sort %}
        {% for category in all_categories %}
          {% assign category_name = category | first %}
          <label class="btn btn-sm btn-outline-secondary mb-0 toolbox-checkbox" style="cursor: pointer; margin: 0;">
            <input type="checkbox" class="d-none filter-category" value="{{ category_name }}" onchange="updateFilterVisual()">
            <span>{{ category_name }}</span>
          </label>
        {% endfor %}
      </div>
    </div>

    <!-- Sort Section -->
    <div class="mb-3">
      <label class="small text-muted mb-2 d-block">Sort by</label>
      <div class="d-flex flex-column" style="gap: 0.5rem;">
        <label class="btn btn-sm btn-outline-secondary mb-0 text-start toolbox-radio" style="cursor: pointer;">
          <input type="radio" name="sort-option" class="d-none" value="date-desc" checked onchange="updateSortVisual()">
          <span><i class="fas fa-calendar-alt me-1"></i> Newest First</span>
        </label>
        <label class="btn btn-sm btn-outline-secondary mb-0 text-start toolbox-radio" style="cursor: pointer;">
          <input type="radio" name="sort-option" class="d-none" value="date-asc" onchange="updateSortVisual()">
          <span><i class="fas fa-calendar-alt me-1"></i> Oldest First</span>
        </label>
        <label class="btn btn-sm btn-outline-secondary mb-0 text-start toolbox-radio" style="cursor: pointer;">
          <input type="radio" name="sort-option" class="d-none" value="title-asc" onchange="updateSortVisual()">
          <span><i class="fas fa-sort-alpha-down me-1"></i> Title A-Z</span>
        </label>
        <label class="btn btn-sm btn-outline-secondary mb-0 text-start toolbox-radio" style="cursor: pointer;">
          <input type="radio" name="sort-option" class="d-none" value="title-desc" onchange="updateSortVisual()">
          <span><i class="fas fa-sort-alpha-up me-1"></i> Title Z-A</span>
        </label>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex" style="gap: 0.5rem; margin-top: 1rem;">
      <button type="button" class="btn btn-sm btn-primary flex-fill" onclick="applyFilters()">
        <i class="fas fa-check me-1"></i> Apply
      </button>
      <button type="button" class="btn btn-sm btn-outline-secondary flex-fill" onclick="clearFilters()">
        <i class="fas fa-times me-1"></i> Clear
      </button>
    </div>
  </div>
</section>
{% include post-toolbox-style.html %}
{% endif %}

